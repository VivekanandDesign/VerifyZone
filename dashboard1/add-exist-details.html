<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Existing Employee Details - V-Zone</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/dashboard-navbar.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/forms.css">
</head>
<body>
    <!-- Top navbar will be injected here by JavaScript -->
    <div id="top-navbar-container"></div>
    
    <!-- Sidebar Toggle Button -->
    <button class="sidebar-toggle" id="sidebarToggle">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <polyline points="15,18 9,12 15,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </button>
    
    <!-- Mobile menu toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle">â˜°</button>
    
    <!-- Sidebar overlay for mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
    <div class="dashboard-container">
        <aside class="sidebar" id="sidebar">
            <nav class="sidebar-nav">
                <ul>
                    <!-- Dashboard -->
                    <li><a href="index.html" class="nav-link" data-tooltip="Dashboard">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Dashboard</span>
                    </a></li>
                    
                    <!-- User Details Accordion -->
                    <li class="nav-accordion active">
                        <a href="#" class="nav-link accordion-toggle" data-tooltip="User Details">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M23 21V19C23 18.1332 22.7361 17.3024 22.2512 16.6193C21.7664 15.9361 21.0872 15.4429 20.3127 15.2134" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M16 3.13A4.001 4.001 0 0 1 16 10.87" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>User Details</span>
                            <svg class="accordion-arrow" width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <polyline points="6,9 12,15 18,9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </a>
                        <ul class="accordion-submenu">
                            <li><a href="add-exist-details.html" class="nav-link submenu-link active" data-tooltip="Add Exist Details">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <polyline points="10,9 9,9 8,9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <span>Add Exist Details</span>
                            </a></li>
                            <li><a href="verification-request.html" class="nav-link submenu-link" data-tooltip="Verification Request">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <span>Verification Request</span>
                            </a></li>
                            <li><a href="new-request-received.html" class="nav-link submenu-link" data-tooltip="New Request Received">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M19 11H5M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <span>New Request Received</span>
                            </a></li>
                            <li><a href="search-candidate.html" class="nav-link submenu-link" data-tooltip="Search Candidate">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <span>Search Candidate</span>
                            </a></li>
                            <li><a href="bulk-upload.html" class="nav-link submenu-link" data-tooltip="Bulk Upload">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M21 15V19C21 19.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <polyline points="7,10 12,5 17,10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <line x1="12" y1="5" x2="12" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <span>Bulk Upload</span>
                            </a></li>
                        </ul>
                    </li>
                    
                    <!-- Rate Employee -->
                    <li><a href="rate-employee.html" class="nav-link" data-tooltip="Rate Employee">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26 12,2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Rate Employee</span>
                    </a></li>
                    
                    <!-- External Links -->
                    <li><a href="../dashboard2/index.html" class="nav-link external" data-tooltip="X-Zone Dashboard">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span>X-Zone Dashboard</span>
                    </a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="dashboard-header">
                <div class="header-content">
                    <h1>Add Existing Employee Details</h1>
                    <div class="header-actions">
                        <button class="btn btn-outline" onclick="window.history.back()">Back to Dashboard</button>
                        <button class="btn btn-primary" id="saveEmployee">Save Employee</button>
                    </div>
                </div>
            </header>

            <!-- Form Content -->
            <div class="dashboard-content">
                <div class="form-container">
                    <form id="employeeForm" class="employee-form">
                        <!-- Personal Information Section -->
                        <div class="form-section">
                            <div class="section-header">
                                <h2>Personal Information</h2>
                                <p>Basic employee details and contact information</p>
                            </div>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="firstName">First Name</label>
                                    <input type="text" id="firstName" name="firstName" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="lastName">Last Name</label>
                                    <input type="text" id="lastName" name="lastName" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="email">Email Address</label>
                                    <input type="email" id="email" name="email" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="phone">Phone Number</label>
                                    <input type="tel" id="phone" name="phone" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="dateOfBirth">Date of Birth</label>
                                    <input type="date" id="dateOfBirth" name="dateOfBirth">
                                </div>
                                
                                <div class="form-group">
                                    <label for="gender">Gender</label>
                                    <select id="gender" name="gender">
                                        <option value="">Select Gender</option>
                                        <option value="male">Male</option>
                                        <option value="female">Female</option>
                                        <option value="other">Other</option>
                                        <option value="prefer-not-to-say">Prefer not to say</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Employment Details Section -->
                        <div class="form-section">
                            <div class="section-header">
                                <h2>Employment Details</h2>
                                <p>Job role, department, and employment information</p>
                            </div>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="employeeId">Employee ID</label>
                                    <input type="text" id="employeeId" name="employeeId" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="jobTitle">Job Title</label>
                                    <input type="text" id="jobTitle" name="jobTitle" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="department">Department</label>
                                    <select id="department" name="department" required>
                                        <option value="">Select Department</option>
                                        <option value="hr">Human Resources</option>
                                        <option value="it">Information Technology</option>
                                        <option value="finance">Finance</option>
                                        <option value="marketing">Marketing</option>
                                        <option value="sales">Sales</option>
                                        <option value="operations">Operations</option>
                                        <option value="legal">Legal</option>
                                        <option value="admin">Administration</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="manager">Reporting Manager</label>
                                    <input type="text" id="manager" name="manager">
                                </div>
                                
                                <div class="form-group">
                                    <label for="startDate">Start Date</label>
                                    <input type="date" id="startDate" name="startDate" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="employmentType">Employment Type</label>
                                    <select id="employmentType" name="employmentType" required>
                                        <option value="">Select Type</option>
                                        <option value="full-time">Full Time</option>
                                        <option value="part-time">Part Time</option>
                                        <option value="contract">Contract</option>
                                        <option value="internship">Internship</option>
                                        <option value="consultant">Consultant</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="workLocation">Work Location</label>
                                    <select id="workLocation" name="workLocation">
                                        <option value="">Select Location</option>
                                        <option value="office">Office</option>
                                        <option value="remote">Remote</option>
                                        <option value="hybrid">Hybrid</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="salary">Annual Salary</label>
                                    <input type="number" id="salary" name="salary" placeholder="Enter amount">
                                </div>
                            </div>
                        </div>

                        <!-- Verification Details Section -->
                        <div class="form-section">
                            <div class="section-header">
                                <h2>Verification & Documents</h2>
                                <p>Identity verification and document information</p>
                            </div>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="nationalId">National ID/SSN</label>
                                    <input type="text" id="nationalId" name="nationalId">
                                </div>
                                
                                <div class="form-group">
                                    <label for="passportNumber">Passport Number</label>
                                    <input type="text" id="passportNumber" name="passportNumber">
                                </div>
                                
                                <div class="form-group">
                                    <label for="verificationStatus">Verification Status</label>
                                    <select id="verificationStatus" name="verificationStatus">
                                        <option value="pending">Pending</option>
                                        <option value="in-progress">In Progress</option>
                                        <option value="verified">Verified</option>
                                        <option value="rejected">Rejected</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="backgroundCheck">Background Check</label>
                                    <select id="backgroundCheck" name="backgroundCheck">
                                        <option value="not-required">Not Required</option>
                                        <option value="pending">Pending</option>
                                        <option value="completed">Completed</option>
                                        <option value="failed">Failed</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Address Information Section -->
                        <div class="form-section">
                            <div class="section-header">
                                <h2>Address Information</h2>
                                <p>Current and permanent address details</p>
                            </div>
                            
                            <div class="address-sections">
                                <div class="address-group">
                                    <h3>Current Address</h3>
                                    <div class="form-grid">
                                        <div class="form-group span-2">
                                            <label for="currentStreet">Street Address</label>
                                            <input type="text" id="currentStreet" name="currentStreet">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="currentCity">City</label>
                                            <input type="text" id="currentCity" name="currentCity">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="currentState">State/Province</label>
                                            <input type="text" id="currentState" name="currentState">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="currentZip">ZIP/Postal Code</label>
                                            <input type="text" id="currentZip" name="currentZip">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="currentCountry">Country</label>
                                            <input type="text" id="currentCountry" name="currentCountry">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="address-group">
                                    <div class="address-header">
                                        <h3>Permanent Address</h3>
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="sameAsCurrentAddress">
                                            Same as current address
                                        </label>
                                    </div>
                                    <div class="form-grid">
                                        <div class="form-group span-2">
                                            <label for="permanentStreet">Street Address</label>
                                            <input type="text" id="permanentStreet" name="permanentStreet">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="permanentCity">City</label>
                                            <input type="text" id="permanentCity" name="permanentCity">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="permanentState">State/Province</label>
                                            <input type="text" id="permanentState" name="permanentState">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="permanentZip">ZIP/Postal Code</label>
                                            <input type="text" id="permanentZip" name="permanentZip">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="permanentCountry">Country</label>
                                            <input type="text" id="permanentCountry" name="permanentCountry">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Additional Information Section -->
                        <div class="form-section">
                            <div class="section-header">
                                <h2>Additional Information</h2>
                                <p>Emergency contacts and other relevant details</p>
                            </div>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="emergencyContactName">Emergency Contact Name</label>
                                    <input type="text" id="emergencyContactName" name="emergencyContactName">
                                </div>
                                
                                <div class="form-group">
                                    <label for="emergencyContactPhone">Emergency Contact Phone</label>
                                    <input type="tel" id="emergencyContactPhone" name="emergencyContactPhone">
                                </div>
                                
                                <div class="form-group">
                                    <label for="emergencyContactRelation">Relationship</label>
                                    <input type="text" id="emergencyContactRelation" name="emergencyContactRelation">
                                </div>
                                
                                <div class="form-group">
                                    <label for="bloodGroup">Blood Group</label>
                                    <select id="bloodGroup" name="bloodGroup">
                                        <option value="">Select Blood Group</option>
                                        <option value="A+">A+</option>
                                        <option value="A-">A-</option>
                                        <option value="B+">B+</option>
                                        <option value="B-">B-</option>
                                        <option value="AB+">AB+</option>
                                        <option value="AB-">AB-</option>
                                        <option value="O+">O+</option>
                                        <option value="O-">O-</option>
                                    </select>
                                </div>
                                
                                <div class="form-group span-2">
                                    <label for="notes">Additional Notes</label>
                                    <textarea id="notes" name="notes" rows="4" placeholder="Any additional information about the employee"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <div class="form-actions">
                            <button type="button" class="btn btn-outline" onclick="window.history.back()">Cancel</button>
                            <button type="button" class="btn btn-secondary" id="saveDraft">Save as Draft</button>
                            <button type="submit" class="btn btn-primary">Submit Employee Details</button>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <script src="../js/dashboard-navbar.js"></script>
    <script>
        // Initialize the dashboard navbar for V-Zone immediately when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded, initializing components...');
            
            try {
                // Initialize navbar if available
                if (typeof DashboardNavbar !== 'undefined') {
                    const dashboardNavbar = new DashboardNavbar('v-zone');
                    console.log('Dashboard navbar initialized');
                } else {
                    console.log('DashboardNavbar not available, continuing without it');
                }
                
                // Initialize sidebar toggle functionality
                initSidebarToggle();
                
                // Initialize accordion functionality
                initAccordion();
                
                // Initialize form functionality
                initEmployeeForm();
                
                console.log('All components initialized successfully');
            } catch (error) {
                console.error('Error initializing components:', error);
            }
        });
        
        // Sidebar toggle functionality
        function initSidebarToggle() {
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            
            if (sidebar && sidebarToggle) {
                sidebarToggle.addEventListener('click', function() {
                    sidebar.classList.toggle('collapsed');
                    
                    // Rotate icon based on state
                    const icon = sidebarToggle.querySelector('svg');
                    if (sidebar.classList.contains('collapsed')) {
                        icon.style.transform = 'rotate(180deg)';
                        // Move toggle button to collapsed position using CSS custom property
                        document.documentElement.style.setProperty('--toggle-button-left', 'calc(var(--sidebar-collapsed-width) - 20px)');
                        console.log('Sidebar collapsed - toggle button moved to collapsed position');
                    } else {
                        icon.style.transform = 'rotate(0deg)';
                        // Move toggle button to expanded position using CSS custom property
                        document.documentElement.style.setProperty('--toggle-button-left', 'calc(var(--sidebar-width) - 20px)');
                        console.log('Sidebar expanded - toggle button moved to expanded position');
                    }
                    
                    // Force a reflow to ensure CSS transitions work
                    sidebar.offsetHeight;
                });
                
                console.log('Sidebar toggle initialized');
            } else {
                console.error('Sidebar or toggle button not found');
            }
        }
        
        // Accordion functionality
        function initAccordion() {
            const accordionToggles = document.querySelectorAll('.accordion-toggle');
            
            accordionToggles.forEach(toggle => {
                toggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const accordionItem = this.closest('.nav-accordion');
                    const isActive = accordionItem.classList.contains('active');
                    
                    // Close all other accordions
                    document.querySelectorAll('.nav-accordion').forEach(item => {
                        item.classList.remove('active');
                    });
                    
                    // Toggle current accordion
                    if (!isActive) {
                        accordionItem.classList.add('active');
                    }
                    
                    console.log('Accordion toggled:', accordionItem.querySelector('span').textContent);
                });
            });
            
            console.log('Accordion functionality initialized');
        }
        
        // Employee form functionality
        function initEmployeeForm() {
            const form = document.getElementById('employeeForm');
            const sameAddressCheckbox = document.getElementById('sameAsCurrentAddress');
            
            // Handle same address checkbox
            if (sameAddressCheckbox) {
                sameAddressCheckbox.addEventListener('change', function() {
                    const currentFields = ['currentStreet', 'currentCity', 'currentState', 'currentZip', 'currentCountry'];
                    const permanentFields = ['permanentStreet', 'permanentCity', 'permanentState', 'permanentZip', 'permanentCountry'];
                    
                    if (this.checked) {
                        currentFields.forEach((field, index) => {
                            const currentValue = document.getElementById(field).value;
                            document.getElementById(permanentFields[index]).value = currentValue;
                        });
                    } else {
                        permanentFields.forEach(field => {
                            document.getElementById(field).value = '';
                        });
                    }
                });
            }
            
            // Handle form submission
            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Collect form data
                    const formData = new FormData(form);
                    const employeeData = {};
                    
                    for (let [key, value] of formData.entries()) {
                        employeeData[key] = value;
                    }
                    
                    console.log('Employee data:', employeeData);
                    
                    // Simulate API call
                    setTimeout(() => {
                        alert('Employee details saved successfully!');
                        // Redirect back to dashboard or employee list
                        window.location.href = 'index.html';
                    }, 1000);
                });
            }
            
            // Handle save draft
            const saveDraftBtn = document.getElementById('saveDraft');
            if (saveDraftBtn) {
                saveDraftBtn.addEventListener('click', function() {
                    const formData = new FormData(form);
                    const draftData = {};
                    
                    for (let [key, value] of formData.entries()) {
                        draftData[key] = value;
                    }
                    
                    // Save to localStorage as draft
                    localStorage.setItem('employeeDraft', JSON.stringify(draftData));
                    alert('Draft saved successfully!');
                });
            }
            
            // Load draft on page load
            const savedDraft = localStorage.getItem('employeeDraft');
            if (savedDraft) {
                const draftData = JSON.parse(savedDraft);
                Object.keys(draftData).forEach(key => {
                    const field = document.getElementById(key);
                    if (field) {
                        field.value = draftData[key];
                    }
                });
            }
            
            console.log('Employee form initialized');
        }
    </script>
</body>
</html>
