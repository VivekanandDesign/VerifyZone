<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - V-Zone</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/global.css">
</head>
<body>
    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <h1 id="formTitle">Welcome to V-Zone</h1>
                <p id="formSubtitle">Sign in to your account</p>
            </div>

            <!-- Form Toggle Buttons -->
            <div class="d-flex justify-content-center mb-6">
                <div class="btn-group">
                    <button type="button" class="btn btn-primary btn-sm active" id="loginToggle">Login</button>
                    <button type="button" class="btn btn-outline-primary btn-sm" id="registerToggle">Register</button>
                </div>
            </div>

            <!-- Login Form -->
            <form class="auth-form" id="loginForm">
                <div class="alert alert-success" id="successMessage" style="display: none;"></div>
                <div class="alert alert-danger" id="errorAlert" style="display: none;"></div>

                <div class="form-group">
                    <label for="loginEmail" class="form-label">Email Address</label>
                    <input type="email" id="loginEmail" class="form-control" placeholder="Enter your email" required>
                    <div class="invalid-feedback" id="loginEmailError"></div>
                </div>

                <div class="form-group">
                    <label for="loginPassword" class="form-label">Password</label>
                    <input type="password" id="loginPassword" class="form-control" placeholder="Enter your password" required>
                    <div class="invalid-feedback" id="loginPasswordError"></div>
                </div>

                <div class="form-check mb-4">
                    <input type="checkbox" id="rememberMe" class="form-check-input">
                    <label for="rememberMe" class="form-check-label">Remember me</label>
                </div>

                <button type="submit" class="btn btn-primary btn-full">Sign In</button>
            </form>

            <!-- Registration Form -->
            <form class="auth-form" id="registerForm" style="display: none;">
                <div class="alert alert-success" id="regSuccessMessage" style="display: none;"></div>
                <div class="alert alert-danger" id="regErrorAlert" style="display: none;"></div>

                <div class="form-group">
                    <label for="firstName" class="form-label">First Name</label>
                    <input type="text" id="firstName" class="form-control" placeholder="Enter your first name" required>
                    <div class="invalid-feedback" id="firstNameError"></div>
                </div>

                <div class="form-group">
                    <label for="lastName" class="form-label">Last Name</label>
                    <input type="text" id="lastName" class="form-control" placeholder="Enter your last name" required>
                    <div class="invalid-feedback" id="lastNameError"></div>
                </div>

                <div class="form-group">
                    <label for="regEmail" class="form-label">Email Address</label>
                    <input type="email" id="regEmail" class="form-control" placeholder="Enter your email" required>
                    <div class="invalid-feedback" id="regEmailError"></div>
                </div>

                <div class="form-group">
                    <label for="regPassword" class="form-label">Password</label>
                    <input type="password" id="regPassword" class="form-control" placeholder="Create a password" required>
                    <div class="password-strength">
                        <div class="strength-bar">
                            <div class="strength-fill" id="strengthFill"></div>
                        </div>
                        <div class="strength-text" id="strengthText">Password strength</div>
                    </div>
                    <div class="invalid-feedback" id="regPasswordError"></div>
                </div>

                <div class="form-group">
                    <label for="confirmPassword" class="form-label">Confirm Password</label>
                    <input type="password" id="confirmPassword" class="form-control" placeholder="Confirm your password" required>
                    <div class="invalid-feedback" id="confirmPasswordError"></div>
                </div>

                <div class="form-check mb-4">
                    <input type="checkbox" id="agreeTerms" class="form-check-input" required>
                    <label for="agreeTerms" class="form-check-label">I agree to the <a href="#" class="text-primary">Terms of Service</a> and <a href="#" class="text-primary">Privacy Policy</a></label>
                </div>

                <button type="submit" class="btn btn-primary btn-full">Create Account</button>
            </form>

            <!-- Forgot Password Form -->
            <form class="auth-form" id="forgotPasswordForm" style="display: none;">
                <div class="alert alert-success" id="forgotSuccessMessage" style="display: none;"></div>
                <div class="alert alert-danger" id="forgotErrorAlert" style="display: none;"></div>

                <div class="form-group">
                    <label for="forgotEmail" class="form-label">Email Address</label>
                    <input type="email" id="forgotEmail" class="form-control" placeholder="Enter your email" required>
                    <div class="invalid-feedback" id="forgotEmailError"></div>
                </div>

                <button type="submit" class="btn btn-primary btn-full">Send Reset Link</button>
                <button type="button" class="btn btn-outline-primary btn-full mt-3" id="backToLogin">Back to Login</button>
            </form>

            <!-- OTP Verification Form -->
            <form class="auth-form" id="otpForm" style="display: none;">
                <div class="alert alert-success" id="otpSuccessMessage" style="display: none;"></div>
                <div class="alert alert-danger" id="otpErrorAlert" style="display: none;"></div>

                <p class="text-center text-muted mb-4">We've sent a verification code to your email</p>

                <div class="otp-container">
                    <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                    <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                    <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                    <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                    <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                    <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                </div>

                <button type="submit" class="btn btn-primary btn-full">Verify Code</button>
                <button type="button" class="btn btn-outline-primary btn-full mt-3" id="resendOtp">Resend Code</button>
            </form>

            <!-- Reset Password Form -->
            <form class="auth-form" id="resetPasswordForm" style="display: none;">
                <div class="alert alert-success" id="resetSuccessMessage" style="display: none;"></div>
                <div class="alert alert-danger" id="resetErrorAlert" style="display: none;"></div>

                <div class="form-group">
                    <label for="newPassword" class="form-label">New Password</label>
                    <input type="password" id="newPassword" class="form-control" placeholder="Enter new password" required>
                    <div class="password-strength">
                        <div class="strength-bar">
                            <div class="strength-fill" id="newPasswordStrengthFill"></div>
                        </div>
                        <div class="strength-text" id="newPasswordStrengthText">Password strength</div>
                    </div>
                    <div class="invalid-feedback" id="newPasswordError"></div>
                </div>

                <div class="form-group">
                    <label for="confirmNewPassword" class="form-label">Confirm New Password</label>
                    <input type="password" id="confirmNewPassword" class="form-control" placeholder="Confirm new password" required>
                    <div class="invalid-feedback" id="confirmNewPasswordError"></div>
                </div>

                <button type="submit" class="btn btn-primary btn-full">Reset Password</button>
            </form>

            <div class="auth-footer">
                <p id="authFooterText">Don't have an account? <a href="#" id="switchToRegister">Sign up here</a></p>
                <p><a href="#" id="forgotPasswordLink">Forgot your password?</a></p>
            </div>
        </div>
    </div>

    <style>
        /* Custom styles for form toggle and special auth components */
        .btn-group {
            display: flex;
            border-radius: var(--border-radius);
            overflow: hidden;
            background: var(--bg-light);
            padding: 4px;
        }

        .btn-group .btn {
            margin: 0;
            border-radius: var(--border-radius-sm);
            border: none;
            flex: 1;
        }

        .btn-group .btn.active {
            background: var(--primary-color);
            color: var(--text-light);
        }

        .btn-group .btn:not(.active) {
            background: transparent;
            color: var(--text-dark);
        }

        .btn-group .btn:not(.active):hover {
            background: rgba(54, 25, 104, 0.1);
        }

        /* OTP specific styles are already in global.css */
    </style>

    <script>
        // Form switching logic
        const loginToggle = document.getElementById('loginToggle');
        const registerToggle = document.getElementById('registerToggle');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const forgotPasswordForm = document.getElementById('forgotPasswordForm');
        const otpForm = document.getElementById('otpForm');
        const resetPasswordForm = document.getElementById('resetPasswordForm');
        const formTitle = document.getElementById('formTitle');
        const formSubtitle = document.getElementById('formSubtitle');
        const authFooterText = document.getElementById('authFooterText');

        // Toggle between login and register
        loginToggle.addEventListener('click', () => {
            loginToggle.classList.add('active');
            registerToggle.classList.remove('active');
            showForm('login');
        });

        registerToggle.addEventListener('click', () => {
            registerToggle.classList.add('active');
            loginToggle.classList.remove('active');
            showForm('register');
        });

        // Forgot password link
        document.getElementById('forgotPasswordLink').addEventListener('click', (e) => {
            e.preventDefault();
            showForm('forgot');
        });

        // Back to login from forgot password
        document.getElementById('backToLogin').addEventListener('click', () => {
            showForm('login');
        });

        // Switch to register from footer
        document.getElementById('switchToRegister').addEventListener('click', (e) => {
            e.preventDefault();
            registerToggle.click();
        });

        function showForm(type) {
            // Hide all forms
            const forms = [loginForm, registerForm, forgotPasswordForm, otpForm, resetPasswordForm];
            forms.forEach(form => form.style.display = 'none');

            // Hide toggle buttons for certain forms
            const toggleContainer = document.querySelector('.btn-group').parentElement;

            switch(type) {
                case 'login':
                    loginForm.style.display = 'block';
                    toggleContainer.style.display = 'flex';
                    formTitle.textContent = 'Welcome to V-Zone';
                    formSubtitle.textContent = 'Sign in to your account';
                    authFooterText.innerHTML = `Don't have an account? <a href="#" id="switchToRegister">Sign up here</a>`;
                    break;
                case 'register':
                    registerForm.style.display = 'block';
                    toggleContainer.style.display = 'flex';
                    formTitle.textContent = 'Join V-Zone';
                    formSubtitle.textContent = 'Create your account';
                    authFooterText.innerHTML = `Already have an account? <a href="#" id="switchToLogin">Sign in here</a>`;
                    break;
                case 'forgot':
                    forgotPasswordForm.style.display = 'block';
                    toggleContainer.style.display = 'none';
                    formTitle.textContent = 'Reset Password';
                    formSubtitle.textContent = 'Enter your email to receive reset instructions';
                    authFooterText.innerHTML = '';
                    break;
                case 'otp':
                    otpForm.style.display = 'block';
                    toggleContainer.style.display = 'none';
                    formTitle.textContent = 'Verify Email';
                    formSubtitle.textContent = 'Enter the verification code sent to your email';
                    authFooterText.innerHTML = '';
                    break;
                case 'reset':
                    resetPasswordForm.style.display = 'block';
                    toggleContainer.style.display = 'none';
                    formTitle.textContent = 'New Password';
                    formSubtitle.textContent = 'Create a strong new password';
                    authFooterText.innerHTML = '';
                    break;
            }

            // Re-bind switch to login link if it exists
            const switchToLogin = document.getElementById('switchToLogin');
            if (switchToLogin) {
                switchToLogin.addEventListener('click', (e) => {
                    e.preventDefault();
                    loginToggle.click();
                });
            }

            // Re-bind switch to register link if it exists
            const switchToRegister = document.getElementById('switchToRegister');
            if (switchToRegister) {
                switchToRegister.addEventListener('click', (e) => {
                    e.preventDefault();
                    registerToggle.click();
                });
            }
        }

        // Password strength checker
        function checkPasswordStrength(password, fillElement, textElement) {
            const strength = {
                0: { text: 'Very Weak', class: 'weak', width: '20%' },
                1: { text: 'Weak', class: 'weak', width: '40%' },
                2: { text: 'Fair', class: 'medium', width: '60%' },
                3: { text: 'Good', class: 'medium', width: '80%' },
                4: { text: 'Strong', class: 'strong', width: '100%' }
            };

            let score = 0;
            if (password.length >= 8) score++;
            if (/[a-z]/.test(password)) score++;
            if (/[A-Z]/.test(password)) score++;
            if (/[0-9]/.test(password)) score++;
            if (/[^A-Za-z0-9]/.test(password)) score++;

            const result = strength[Math.min(score, 4)];
            
            fillElement.style.width = result.width;
            fillElement.className = `strength-fill ${result.class}`;
            textElement.textContent = result.text;
            textElement.className = `strength-text text-${result.class === 'weak' ? 'danger' : result.class === 'medium' ? 'warning' : 'success'}`;
        }

        // Password strength for registration
        document.getElementById('regPassword').addEventListener('input', (e) => {
            const fillElement = document.getElementById('strengthFill');
            const textElement = document.getElementById('strengthText');
            checkPasswordStrength(e.target.value, fillElement, textElement);
        });

        // Password strength for reset password
        document.getElementById('newPassword').addEventListener('input', (e) => {
            const fillElement = document.getElementById('newPasswordStrengthFill');
            const textElement = document.getElementById('newPasswordStrengthText');
            checkPasswordStrength(e.target.value, fillElement, textElement);
        });

        // OTP input handling
        const otpInputs = document.querySelectorAll('.otp-input');
        otpInputs.forEach((input, index) => {
            input.addEventListener('input', (e) => {
                const value = e.target.value.replace(/[^0-9]/g, '');
                e.target.value = value;

                if (value && index < otpInputs.length - 1) {
                    otpInputs[index + 1].focus();
                }
            });

            input.addEventListener('keydown', (e) => {
                if (e.key === 'Backspace' && !e.target.value && index > 0) {
                    otpInputs[index - 1].focus();
                }
            });
        });

        // Form submissions (basic validation - replace with actual authentication logic)
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            // Add your login logic here
            console.log('Login form submitted');
        });

        document.getElementById('registerForm').addEventListener('submit', (e) => {
            e.preventDefault();
            // Add your registration logic here
            console.log('Registration form submitted');
            // Simulate moving to OTP verification
            // showForm('otp');
        });

        document.getElementById('forgotPasswordForm').addEventListener('submit', (e) => {
            e.preventDefault();
            // Add your forgot password logic here
            console.log('Forgot password form submitted');
            // Simulate moving to OTP verification
            // showForm('otp');
        });

        document.getElementById('otpForm').addEventListener('submit', (e) => {
            e.preventDefault();
            // Add your OTP verification logic here
            console.log('OTP form submitted');
            // Simulate moving to reset password
            // showForm('reset');
        });

        document.getElementById('resetPasswordForm').addEventListener('submit', (e) => {
            e.preventDefault();
            // Add your reset password logic here
            console.log('Reset password form submitted');
            // Simulate success and return to login
            // showForm('login');
        });

        // Initialize the form
        showForm('login');
    </script>
</body>
</html>
